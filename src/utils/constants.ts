import ytdl from "@distube/ytdl-core";
import type { CorsOptions } from "cors";

export const SESSION_LIFE = 3 * 60 * 60 * 1000; // 3hrs
export const tempFolderName = "tmp";

const cookies = [
  {
    name: "__Secure-1PAPISID",
    value: "lBfmHLLyZWCaf9ck/A7N0_glEesBQWM3eu",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 1,
  },
  {
    name: "__Secure-1PSID",
    value:
      "g.a000rQgPzZnlbPApF8RvF6FthqUedukWmaKP0uS0OpApBtLZ4YBY12-Mbwq0wmgdJjvCWi9xtgACgYKAeUSARASFQHGX2MihK5bOSYlqZgCDJhvoELWtxoVAUF8yKqiht5lqZQcViXSurkpq6iJ0076",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 2,
  },
  {
    name: "__Secure-1PSIDCC",
    value:
      "AKEyXzVdg76L_vxAbvklSPKgTYn85btT7VB0lIc7Zji3-eL28gafN-qzdEoSPUjQ1eXw0fw6",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1766092941,
    storeId: "firefox-private",
    id: 3,
  },
  {
    name: "__Secure-1PSIDTS",
    value:
      "sidts-CjEB7wV3sXdhL5ixPFhuJt2s7_Ub4J3poZXNgO6E-3Np_qm-sfrXMyvYL6keEEx40mX4EAA",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1766092936,
    storeId: "firefox-private",
    id: 4,
  },
  {
    name: "__Secure-3PAPISID",
    value: "lBfmHLLyZWCaf9ck/A7N0_glEesBQWM3eu",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 5,
  },
  {
    name: "__Secure-3PSID",
    value:
      "g.a000rQgPzZnlbPApF8RvF6FthqUedukWmaKP0uS0OpApBtLZ4YBYuDbF14j3UvbK179L0ZDgdQACgYKATQSARASFQHGX2MiDhOVfcNe6HxZlz26O4MX_xoVAUF8yKone5QohbsaUyBgtg6PXa9j0076",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 6,
  },
  {
    name: "__Secure-3PSIDCC",
    value:
      "AKEyXzUEvfOA_ggTuDBP-kXsxqq71HpKmZdCjseRb5bAVtQceS2e3xyvD-SBaP4-wignydZV",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1766092941,
    storeId: "firefox-private",
    id: 7,
  },
  {
    name: "__Secure-3PSIDTS",
    value:
      "sidts-CjEB7wV3sXdhL5ixPFhuJt2s7_Ub4J3poZXNgO6E-3Np_qm-sfrXMyvYL6keEEx40mX4EAA",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1766092936,
    storeId: "firefox-private",
    id: 8,
  },
  {
    name: "__Secure-ROLLOUT_TOKEN",
    value: "CJD-mdPZ3a-DGBDq-aGQoLKKAxjq-aGQoLKKAw%3D%3D",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1750108936,
    storeId: "firefox-private",
    id: 9,
  },
  {
    name: "APISID",
    value: "aT8VxYT0hHfxlM-y/A83wWrHRDvYDimBS_",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 10,
  },
  {
    name: "GPS",
    value: "1",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1734558674,
    storeId: "firefox-private",
    id: 11,
  },
  {
    name: "HSID",
    value: "Aw2GhFINoaOvemZGl",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 12,
  },
  {
    name: "LOGIN_INFO",
    value:
      "AFmmF2swRQIgRBtwp8AclPZYvz-96AINR-zgBPaGmZ0M0bwuJgHrxXECIQCLpDY48y1NEhx16uz0yrAsMcFnlCrzVT0KwWvOT1bSpA:QUQ3MjNmejRsTGYtc3lKTGxobFhxRmJSWlR0Q0htclVLS3hUYW5PWjlLSEQwM2lKcVA5VmNxYWEzRlBldUtqdnFvLUMyTV9Gc20wSXpncXpMWHdXN0dWa21DVmtmZElGRm85b3ZhQ3MxWXpscURLdnhvVFlRUzBwMEJfM3d4VEVUSFpOSkg3NF9FdWF1STB3aDFPdkNoU1RPYnVPZ05nSFpn",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 13,
  },
  {
    name: "PREF",
    value: "f6=40000000&tz=Africa.Cairo",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116939,
    storeId: "firefox-private",
    id: 14,
  },
  {
    name: "SAPISID",
    value: "lBfmHLLyZWCaf9ck/A7N0_glEesBQWM3eu",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 15,
  },
  {
    name: "SID",
    value:
      "g.a000rQgPzZnlbPApF8RvF6FthqUedukWmaKP0uS0OpApBtLZ4YBYKwigaP390I-fb14oZoD-jwACgYKATESARASFQHGX2MiSWVbrY4WrtS13a2ZxPMk9RoVAUF8yKpud-_8JyaknOzAd0y-BjBF0076",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 16,
  },
  {
    name: "SIDCC",
    value:
      "AKEyXzXeHm-lVPskTxjUrsDiZOmHiqeErXgPVPUxUf31zv8oYFYLgV_ZAsQn8nItK6ChpxR7bg",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1766092941,
    storeId: "firefox-private",
    id: 17,
  },
  {
    name: "SSID",
    value: "AtRPgijnX2Fg-B_qu",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1769116936,
    storeId: "firefox-private",
    id: 18,
  },
  {
    name: "ST-3opvp5",
    value:
      "session_logininfo=AFmmF2swRQIgRBtwp8AclPZYvz-96AINR-zgBPaGmZ0M0bwuJgHrxXECIQCLpDY48y1NEhx16uz0yrAsMcFnlCrzVT0KwWvOT1bSpA%3AQUQ3MjNmejRsTGYtc3lKTGxobFhxRmJSWlR0Q0htclVLS3hUYW5PWjlLSEQwM2lKcVA5VmNxYWEzRlBldUtqdnFvLUMyTV9Gc20wSXpncXpMWHdXN0dWa21DVmtmZElGRm85b3ZhQ3MxWXpscURLdnhvVFlRUzBwMEJfM3d4VEVUSFpOSkg3NF9FdWF1STB3aDFPdkNoU1RPYnVPZ05nSFpn",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1734556944,
    storeId: "firefox-private",
    id: 19,
  },
  {
    name: "ST-l3hjtt",
    value:
      "session_logininfo=AFmmF2swRQIgRBtwp8AclPZYvz-96AINR-zgBPaGmZ0M0bwuJgHrxXECIQCLpDY48y1NEhx16uz0yrAsMcFnlCrzVT0KwWvOT1bSpA%3AQUQ3MjNmejRsTGYtc3lKTGxobFhxRmJSWlR0Q0htclVLS3hUYW5PWjlLSEQwM2lKcVA5VmNxYWEzRlBldUtqdnFvLUMyTV9Gc20wSXpncXpMWHdXN0dWa21DVmtmZElGRm85b3ZhQ3MxWXpscURLdnhvVFlRUzBwMEJfM3d4VEVUSFpOSkg3NF9FdWF1STB3aDFPdkNoU1RPYnVPZ05nSFpn",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1734556943,
    storeId: "firefox-private",
    id: 20,
  },
  {
    name: "ST-tladcw",
    value:
      "session_logininfo=AFmmF2swRQIgRBtwp8AclPZYvz-96AINR-zgBPaGmZ0M0bwuJgHrxXECIQCLpDY48y1NEhx16uz0yrAsMcFnlCrzVT0KwWvOT1bSpA%3AQUQ3MjNmejRsTGYtc3lKTGxobFhxRmJSWlR0Q0htclVLS3hUYW5PWjlLSEQwM2lKcVA5VmNxYWEzRlBldUtqdnFvLUMyTV9Gc20wSXpncXpMWHdXN0dWa21DVmtmZElGRm85b3ZhQ3MxWXpscURLdnhvVFlRUzBwMEJfM3d4VEVUSFpOSkg3NF9FdWF1STB3aDFPdkNoU1RPYnVPZ05nSFpn",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1734556943,
    storeId: "firefox-private",
    id: 21,
  },
  {
    name: "ST-xuwub9",
    value:
      "session_logininfo=AFmmF2swRQIgRBtwp8AclPZYvz-96AINR-zgBPaGmZ0M0bwuJgHrxXECIQCLpDY48y1NEhx16uz0yrAsMcFnlCrzVT0KwWvOT1bSpA%3AQUQ3MjNmejRsTGYtc3lKTGxobFhxRmJSWlR0Q0htclVLS3hUYW5PWjlLSEQwM2lKcVA5VmNxYWEzRlBldUtqdnFvLUMyTV9Gc20wSXpncXpMWHdXN0dWa21DVmtmZElGRm85b3ZhQ3MxWXpscURLdnhvVFlRUzBwMEJfM3d4VEVUSFpOSkg3NF9FdWF1STB3aDFPdkNoU1RPYnVPZ05nSFpn",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: false,
    httpOnly: false,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1734556945,
    storeId: "firefox-private",
    id: 22,
  },
  {
    name: "VISITOR_INFO1_LIVE",
    value: "9JHS1Fj_oq4",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1750108936,
    storeId: "firefox-private",
    id: 23,
  },
  {
    name: "VISITOR_PRIVACY_METADATA",
    value: "CgJFRxIEGgAgGg%3D%3D",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: false,
    firstPartyDomain: "",
    partitionKey: null,
    expirationDate: 1750108936,
    storeId: "firefox-private",
    id: 24,
  },
  {
    name: "YSC",
    value: "Dz_oBB-7qZk",
    domain: ".youtube.com",
    hostOnly: false,
    path: "/",
    secure: true,
    httpOnly: true,
    sameSite: "no_restriction",
    session: true,
    firstPartyDomain: "",
    partitionKey: null,
    storeId: "firefox-private",
    id: 25,
  },
];

// export const agent = ytdl.createAgent(cookies);
export const agent = ytdl.createProxyAgent(
  { uri: "http://181.215.253.112:5001", bodyTimeout: 20000 },
  cookies
);

export const CORS_OPTIONS: CorsOptions = {
  origin: [/https:\/\/vidl-client.vercel.app/, /http:\/\/localhost:\d{4}/],
  credentials: true,
  methods: ["GET", "POST"],
  optionsSuccessStatus: 200,
};
